<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Nova Runner</title>
        <link rel="stylesheet" href="./styles/main.css" />
        <link rel="shortcut icon" href="./assets/images/favicon.png" />
        <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/2.0.2/TweenMax.min.js"></script>
        <script src="./modules/three.min.js"></script>
        <script src="./modules/GLTFLoader.js"></script>
        <script src="./modules/physi.js"></script>
        <script src="https://threejs.org/examples/js/controls/OrbitControls.js"></script>
        <script type="module" src="./src/main.js"></script>
    </head>
    <body>

        <!---Loading Screen-->
        <div id="loadingscreen">
            <label style="color: antiquewhite; font-size: xxx-large; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);">Loading ...</label>
        </div>



        <!---Overlays-->
        <div id="overlays" style="text-align: center; display: none;">
            <h1 id="scoreDisplay">Score: </h1>
            <div id="pauseBtn" class="pause-open" style="color: white">pause</div> 
        </div>

        <!---Pause Menu-->
        <div id="pauseMenu">
            <label style="color: antiquewhite; font-size: xxx-large; position: absolute; top: 50%; left: 50%; transform: translate(-50%,-50%);">Paused</label>
            <label style="color: antiquewhite; font-size: large; position: absolute; top: 50%; left: 50%; transform: translate(-50%,200%);"> click anywhere to resume</label>
        </div>

        <!---Game Over Menu-->
        <div id="gameOverMenu">
            <label style="color: antiquewhite; font-size: xxx-large; position: absolute; top: 30%; left: 50%; transform: translate(-50%,-50%);">Game Over</label>
            <a id="mmDeathMenu" href="#" class="menu-open" style="font-size: xx-large; top: 46%; left: 30%; right: 50%;" onclick="playButtonWhoosh();hideGameOverMenu(); window.location.reload()">Main Menu</a>
            <label id="finalScore" style="color: antiquewhite; font-size: xx-large; position: absolute; top: 30%; left: 50%; transform: translate(-50%,200%);"> Score: </label>
            <a id="restart" href="#" style="font-size: xx-large; top: 50%; left: 55%; right: 30%; position: fixed;" onclick="playButton();">Restart</a>
        </div>
        
        <!--Sounds-->
        <audio id="buttonSound" src="assets/music/sfx/buttonSound1.mp3"></audio>
        <audio id="buttonWhoosh" src="assets/music/sfx/buttonSoundWhoosh.mp3"></audio>
        <audio id="gameOverSound" src="assets/music/sfx/game-over.wav"></audio>
        <audio id="fz" src="assets/music/background/fz.mp3"></audio>
        <audio autoplay="true" muted="muted" id="bg2" src="assets/music/background/bg2.mp3"></audio>


        <!---Menu Close Element-->
        <div  class="container"> 
            <div id="menuClose" class="menu-close">
                <div class="menu-close-img" onclick="playButtonWhoosh(); hideMenu()">
                <img src="assets/images/play-icon.png" alt="" />
                </div>
            </div>
            

            <!---White Page Divider-->
            <div id="hr" class="hr"></div>
            <!---Main Menu Container-->
            <div id="menuContainer" class="menu">
                <div class="menu-left">
                    <div class="menu-links">
                        <div class="menu-link" style="padding: 10px">
                            <a href="#" style="font-size: xxx-large" onclick="playButton(); howtoplay()">HOW TO PLAY</a>
                        </div>
                        <div class="menu-link" style="padding: 10px">
                            <a href="#" style="font-size: xxx-large" onclick="playButton(); leaderboards()">LEADERBOARDS</a>
                        </div>
                        <div class="menu-link" style="padding: 10px">
                            <a href="#" style="font-size: xxx-large" onclick="playButton(); credits()">CREDITS</a>
                        </div>
                        <div class="menu-link" style="padding: 10px">
                            <a href="#" style="font-size: xxx-large" onclick="playButton(); settings()">SETTINGS</a>
                        </div>
                    </div>
                </div>
                <div class="menu-right">
                    <img src="assets/images/logo.png" style="width: initial" />
                </div>



                <!-- How To Play menu -->
                <div id="howtoplay" style="display: none; text-align: center; padding: 20px;">
                    <label style="color: antiquewhite; font-size: xxx-large;"> How To Play</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 20%; left: 50%; transform: translate(-50%,-50%);">Nova Runner is a game where you... run... obviously... as far as you can!</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 30%; left: 50%; transform: translate(-50%,-50%);">Easy right? Nah lol, there's some things you're gonna have to avoid but don't worry, here's how:</label>
                    <label style="color: antiquewhite; font-size: xxx-large; position: absolute; top: 45%; left: 50%; transform: translate(-50%,-50%);">Controls:</label>
                    
                    <div style="position: absolute; top: 45%; justify-content: center; display: flex; align-items: center;">
                        <img src="/assets/images/w.png" style="width: 5%; height: 5%; margin-right: 20px;"><img src="/assets/images/spacebar.png" style="width: 15%; height: 5%; margin-right: 20px;"><label style="color: antiquewhite; font-size: xxx-large;"> - JUMP</label>
                    </div>
                    <div style="position: absolute; top: 60%; justify-content: center; display: flex; align-items: center;">
                        <img src="/assets/images/a.png" style="width: 5%; height: 5%; margin-right: 20px;"><label style="color: antiquewhite; font-size: xxx-large;"> - MOVE LEFT</label>
                    </div>
                    <div style="position: absolute; top: 70%; justify-content: center; display: flex; align-items: center;">
                        <img src="/assets/images/d.png" style="width: 5%; height: 5%; margin-right: 20px;"><label style="color: antiquewhite; font-size: xxx-large;"> - MOVE RIGHT</label>
                    </div>
                    <div style="position: absolute; top: 85%; justify-content: center; display: flex; align-items: center;">
                        <img src="/assets/images/esc.png" style="width: 5%; height: 5%; margin-right: 20px;"><label style="color: antiquewhite; font-size: xxx-large;"> - PAUSE</label>
                    </div>

                    <a href="#" style="font-size: xxx-large; position: absolute; bottom: 0; left: 0; padding: 40px;" onclick="back(); playButton()">back</a>
                </div>


                <!-- Leaderboard menu -->
                <div id="leaderboards" style="display: none; text-align: center; padding: 20px;">
                    <label style="color: antiquewhite; font-size: xxx-large;"> Top Scores</label>
                    <a href="#" style="font-size: xxx-large; position: absolute; bottom: 0; left: 0; padding: 40px;" onclick="back(); playButton()">back</a>
                    <style>
                        td, table {
                            padding: 10px;
                            text-align: center;
                            table-layout: fixed
                        }

                        .center {
                            margin-left: auto;
                            margin-right: auto;
                        }
                    </style>
                    <table id="topScores" style="width:100%; color: antiquewhite; padding-top: 5%; font-size: x-large" class="center">

                    </table>
                </div>

                <!-- Credits menu -->
                <div id="credits" style="display: none; text-align: center; padding: 20px;">
                    <label style="color: antiquewhite; font-size: xxx-large;"> credits</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 20%; left: 50%; transform: translate(-50%,-50%);">Ctrl Alt Defeat</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 30%; left: 50%; transform: translate(-50%,-50%);">Tristan Bester (2090454)</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 35%; left: 50%; transform: translate(-50%,-50%);">Jonathan Nunes (2087190)</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 40%; left: 50%; transform: translate(-50%,-50%);">Faisal Saleem (2095208)</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 45%; left: 50%; transform: translate(-50%,-50%);">Ghulame Mujtaba Arbi (2103706)</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 55%; left: 50%; transform: translate(-50%,-50%);">Sound effects and music obtained from www.zapsplat.com and www.mixkit.co under standard licenses</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 65%; left: 50%; transform: translate(-50%,-50%);">Models:</label>
                    <label style="color: antiquewhite; font-size: x-large; position: absolute; top: 80%; left: 50%; transform: translate(-50%,-50%);">
                        "Walking Astronaut" (https://skfb.ly/6X8zX) by ARS 3D is licensed under Creative Commons Attribution (http://creativecommons.org/licenses/by/4.0/).
                        "Spherical hex force field" (https://skfb.ly/6VpBU) by Adamante is licensed under Creative Commons Attribution (http://creativecommons.org/licenses/by/4.0/).
                        </label>
                    <a href="#" style="font-size: xxx-large; position: absolute; bottom: 0; left: 0; padding: 40px;" onclick="back();playButton()">back</a>
                </div>

                <!-- Settings menu -->
                <div id="settings" style="display: none; text-align: center; padding: 20px;">
                    <label style="color: antiquewhite; font-size: xxx-large;"> settings</label>
                    
                    <div style="padding-top: 10%;">

                        <div>
                            <input style="transform: scale(3); margin-right: 20px;" type="checkbox" id="musiccb" name="musiccb" checked>
                            <label for="musiccb" style="color: antiquewhite; font-size: xxx-large;">Music/SFX</label><br>
                        </div>

                        <div style="padding-top: 5%;">
                            <input style="transform: scale(3); margin-right: 20px;" type="checkbox" id="shadowscb" name="shadowscb" checked>
                            <label for="shadowscb" style="color: antiquewhite; font-size: xxx-large;">Shadows</label><br>
                        </div>
                        <div style="padding-top: 5%;">
                            <input style="transform: scale(3); margin-right: 20px;" type="checkbox" id="aacb" name="aacb" checked>
                            <label for="aacb" style="color: antiquewhite; font-size: xxx-large;">Anti-Aliasing</label><br>
                        </div>
                    </div>
                    <a href="#" style="font-size: xxx-large; position: absolute; bottom: 0; left: 0; padding: 40px;" onclick="back(); playButton()">back</a>
                </div>
                        
        </div> 
        
         

         <div id="scene-container"></div> 




        <script>

            tl = new TimelineMax({ paused: true })

            tl.to('.menu-left', 1, {
                left: 0,
                ease: Expo.easeInOut
            })

            tl.to(
                '.menu-right',
                1,
                {
                    right: 0,
                    ease: Expo.easeInOut
                },
                '-=1'
            )

            tl.staggerFrom(
                '.menu-links > div',
                0.8,
                {
                    y: 100,
                    opacity: 0,
                    ease: Expo.easeOut
                },
                '0.1',
                '-=0.4'
            )

            tl.staggerFrom(
                '.mail > div, .socials > div',
                0.8,
                {
                    y: 100,
                    opacity: 0,
                    ease: Expo.easeOut
                },
                '0.1',
                '-=1'
            )

            tl.from(
                '.menu-close',
                1,
                {
                    scale: 0,
                    opacity: 1,
                    ease: Expo.easeInOut
                },
                '-=1'
            )

            tl.to(
                '.hr',
                0.4,
                {
                    scaleY: 1,
                    transformOrigin: '0% 50%',
                    ease: Power2.ease
                },
                '-=1'
            )

            tl.reverse()

            $(document).ready(function () {
                tl.reversed(!tl.reversed())
                openMenu()
                var audio = new Audio ('assets/music/background/bg2.mp3')
                audio.muted = false
                setTimeout(function(){
                    var playPromise = audio.play()
                })
                
                
            })
            $(document).on('click', '.menu-open', function () {
                tl.reversed(!tl.reversed())
            })
            $(document).on('click', '.menu-close', function () {
                tl.reversed(!tl.reversed())
            })
        </script>

        <script>

            //Sound Effects
            function playButton() {
                var musicOn = document.getElementById('musiccb').checked
                if(musicOn == true){
                var audio = document.getElementById('buttonSound')
                audio.play()
                }
            }
            function playButtonWhoosh() {
                var musicOn = document.getElementById('musiccb').checked
                if(musicOn == true){
                var audio = document.getElementById('buttonWhoosh')
                audio.play()
                }
            }

            //Menus
            function hideMenu() {
                var menu = document.getElementById('menuContainer')
                var overlays = document.getElementById('overlays')
                var scene = document.getElementById('scene-container')
                
                setTimeout(function () {
                    menu.style.display = 'none'
                    overlays.style.display = 'block'
                    scene.style.display = 'block'
                }, 2000)
                
            }
            function openMenu() {
                var menu = document.getElementById('menuContainer')
                var overlays = document.getElementById('overlays')
                overlays.style.display = 'none'
                var scene = document.getElementById('scene-container')
                
                menu.style.display = 'block'
                

            }
            function howtoplay(){
                document.getElementById("menuClose").style.display = 'none';
                document.getElementById("hr").style.display = 'none';
                document.getElementById("howtoplay").style.display = 'block';
            }
            function leaderboards(){
                document.getElementById("menuClose").style.display = 'none';
                document.getElementById("hr").style.display = 'none';
                document.getElementById("leaderboards").style.display = 'block';
            }
            function credits(){
                document.getElementById("menuClose").style.display = 'none';
                document.getElementById("hr").style.display = 'none';
                document.getElementById("credits").style.display = 'block';
            }
            function settings(){
                document.getElementById("menuClose").style.display = 'none';
                document.getElementById("hr").style.display = 'none';
                document.getElementById("settings").style.display = 'block';
            }
            function back(){
                document.getElementById("menuClose").style.display = 'block';
                document.getElementById("hr").style.display = 'block';
                document.getElementById("settings").style.display = 'none';
                document.getElementById("howtoplay").style.display = 'none';
                document.getElementById("credits").style.display = 'none';
                document.getElementById("leaderboards").style.display = 'none';

            }
            function hideGameOverMenu(){
                document.getElementById("gameOverMenu").style.display = 'none';
                document.getElementById("menuContainer").style.display = 'block';
            }
            

        </script>
    </body>
</html>
